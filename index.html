<!-- Made by Shrey Shingala 
 
TODO:
ANIMATION
ADD DIFFERENT STYLES FOR MOBILE AND STUFF
RESUME

-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shrey's Portfolio</title>
    <link rel="stylesheet" href="cssfolder/main.css">
    <link rel="icon" type="image/jpg" href="Images/small_logo.jpg">
   
</head>
<body>
    <div id="navbar-container"></div>

    <main>
        <section class="hero">
            <h1>Shrey Shingala</h1>
            <div class="social-links">
                <a href="https://www.linkedin.com/in/shrey-shingala1/" class="icon_button" aria-label="LinkedIn">
                    <img src="Images/linkedin.png" alt="LinkedIn">
                </a>
                <a href="https://github.com/shreyshingala" class="icon_button" aria-label="GitHub">
                    <img src="Images/github.png" alt="GitHub" id="github-icon">
                </a>
                <a href="mailto:shreyshingala1@gmail.com" class="icon_button" aria-label="Email">
                    <img src="Images/email.png" alt="Email" id="email-icon">
                </a>
                <a href="resume.html" class="resume_button" target="_blank">My Resume</a>
            </div>
        </section>

        <section id="About Me">
            <h2>About Me</h2>
            <p>Hey, I'm Shrey a Software Engineer at the University of Waterloo! I've always been passionate about programming and am always open to learning new technologies. I have a lot of interests, but I'm particularly interested in finance.</p>
        </section>

        <section id="projects">
            <h2>My Projects</h2>
            <div id="projects-root"></div>
        </section>

        <section id="contact">
            <h2>Contact Me</h2>
            <p>If you'd like to get in touch, feel free to reach out!</p>

            <div class="form-container js-scroll">
            <form name = "Contact" action="https://formsubmit.co/24b29b31bef15a4ab536b2769902eaac" method="POST" class="form" netlify>

                <label for="name">Name:</label>
                <input type="text" id = "name" name = "name" required oninvalid="this.setCustomValidity('Please Enter Your Name Here')" oninput="this.setCustomValidity('')">

                <label for="email">Email:</label>
                <input type="email" id = "email" name = "email" required oninvalid="this.setCustomValidity('Please Enter Your Email Address Here')" oninput="this.setCustomValidity('')">

                <label for="subject">Subject:</label>
                <input type="text" id = "subject" name = "subject" required oninvalid="this.setCustomValidity('Please Enter the Subject of Your Email Here')" oninput="this.setCustomValidity('')">

                <label for="message">Message:</label>
                <textarea id="message" name = "message" cols="30" rows="10" required oninvalid="this.setCustomValidity('Please Enter the Message of Your Email Here')" oninput="this.setCustomValidity('')"></textarea>

                <button type = "submit" class = "submit-btn">Send Email</button>

            </form>

        </div>

        </section>
    </main>

    
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="main.js"></script>
    <script>
        // push in navbar
        fetch('navbar.html').then(response => response.text()).then(data => {
    
            document.getElementById('navbar-container').innerHTML = data;

            // Dark mode toggle logic
            let lightCursorEnabled = false;
            function setDarkMode(on) {
                document.body.classList.toggle('dark-mode', on);
                var toggle = document.getElementById('dark-mode-toggle');
                var icon = document.getElementById('dark-mode-icon');
                if (toggle) toggle.classList.toggle('on', on);
                if (icon) icon.textContent = on ? 'ðŸŒ™' : 'â˜€ï¸';
                localStorage.setItem('darkMode', on ? '1' : '0');
                // swap icons
                var githubIcon = document.getElementById('github-icon');
                var emailIcon = document.getElementById('email-icon');
                if (githubIcon) {
                    githubIcon.src = on ? 'Images/githubwhite.png' : 'Images/github.png';
                    githubIcon.style.width = on ? '38px' : '';
                    githubIcon.style.height = on ? '38px' : '';
                }
                if (emailIcon) emailIcon.src = on ? 'Images/emailwhite.png' : 'Images/email.png';

                // Show/hide flashlight button
                var lightBtn = document.getElementById('light-cursor-toggle');
                if (lightBtn) {
                    lightBtn.style.display = on ? 'inline-block' : 'none';
                }

                // Enable/disable light-cursor effect
                if (on && lightCursorEnabled) {
                    enableLightCursor();
                } else {
                    disableLightCursor();
                }
            }
            const toggle = document.getElementById('dark-mode-toggle');
            if (toggle) {
                toggle.addEventListener('click', function() {
                    setDarkMode(!document.body.classList.contains('dark-mode'));
                });
            }

            let darkPref;
            if (localStorage.getItem('darkMode') !== null) {
                darkPref = localStorage.getItem('darkMode') === '1';
            } else {
                darkPref = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
            }

            setTimeout(() => {
                var lightBtn = document.getElementById('light-cursor-toggle');
                if (lightBtn) {
                    lightBtn.style.opacity = '0.4';
                }
            }, 0);

            setDarkMode(darkPref);

            setTimeout(() => {
                var lightBtn = document.getElementById('light-cursor-toggle');
                if (lightBtn) {
                    lightBtn.style.display = document.body.classList.contains('dark-mode') ? 'inline-block' : 'none';
                    lightBtn.addEventListener('click', function() {
                        lightCursorEnabled = !lightCursorEnabled;
                        if (document.body.classList.contains('dark-mode') && lightCursorEnabled) {
                            enableLightCursor();
                        } else {
                            disableLightCursor();
                        }
                        lightBtn.style.opacity = lightCursorEnabled ? '1' : '0.4';
                    });
                }
            }, 0);
        });

        // Flashlight cursor thingy
        let lightCursorOverlay = null;
        let lastX = window.innerWidth / 2;
        let lastY = window.innerHeight / 2;

        function enableLightCursor() {
            if (lightCursorOverlay) return;

            lightCursorOverlay = document.createElement('div');
            lightCursorOverlay.style.position = 'fixed';
            lightCursorOverlay.style.pointerEvents = 'none';
            lightCursorOverlay.style.top = '0';
            lightCursorOverlay.style.left = '0';
            lightCursorOverlay.style.width = '100vw';
            lightCursorOverlay.style.height = '100vh';
            lightCursorOverlay.style.zIndex = '9999';
            lightCursorOverlay.style.transition = 'background 0.12s linear';
            lightCursorOverlay.style.willChange = 'background';
            lightCursorOverlay.style.mixBlendMode = 'normal';

            document.body.appendChild(lightCursorOverlay);

        
            document.addEventListener('mousemove', updateLightCursor, { passive: true });
            window.addEventListener('resize', updateLightCursor, { passive: true });

            updateLightCursor();
        }

        // Call to disable the spotlight
        function disableLightCursor() {
            if (!lightCursorOverlay) return;
            document.removeEventListener('mousemove', updateLightCursor);
            window.removeEventListener('resize', updateLightCursor);
            document.body.removeChild(lightCursorOverlay);
            lightCursorOverlay = null;
        }

        // Update overlay background to create a transparent center + dark outer area
        function updateLightCursor(e) {
            if (!lightCursorOverlay) return;

            if (e && e.type === 'mousemove') {
                lastX = e.clientX;
                lastY = e.clientY;
            } else {
                // keep last known mouse position (useful after resize)
                lastX = lastX || window.innerWidth / 2;
                lastY = lastY || window.innerHeight / 2;
            }

            const x = Math.round(lastX);
            const y = Math.round(lastY);

            // radius of the spotlight circle (px)
            const radius = 160;         // tweak this to make spotlight larger/smaller
            const feather = Math.round(radius * 0.45); // soft edge width

            // We want: fully transparent center (so underlying page is visible),
            // then a quick falloff to a dark overlay outside the circle.
            // Use a radial-gradient where the center is rgba(0,0,0,0) (transparent)
            // and outer stops are semi-opaque black to dim the page.
            // Using pixel values ensures the circle tracks the cursor exactly.

            // A modern and robust radial syntax:
            // circle <radius>px at <x>px <y>px, <stop1>, <stop2>, ...
            lightCursorOverlay.style.background = `
                radial-gradient(
                    circle ${radius}px at ${x}px ${y}px,
                    rgba(0,0,0,0) 0%,
                    rgba(0,0,0,0) ${Math.max(0, (radius - feather) / radius * 100)}%,
                    rgba(0,0,0,0.72) ${Math.max(0, (radius + feather * 0.2) / radius * 100)}%,
                    rgba(0,0,0,0.86) 100%
                )
            `;
        }

    </script>

</body>
</html>
